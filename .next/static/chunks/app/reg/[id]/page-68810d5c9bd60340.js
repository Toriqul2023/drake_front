(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{3004:function(e,t,a){Promise.resolve().then(a.bind(a,7525))},5607:function(e,t,a){var r=0/0,s=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt,c="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g,l="object"==typeof self&&self&&self.Object===Object&&self,d=c||l||Function("return this")(),m=Object.prototype.toString,f=Math.max,p=Math.min,h=function(){return d.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==m.call(t))return r;if(g(e)){var t,a="function"==typeof e.valueOf?e.valueOf():e;e=g(a)?a+"":a}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var c=i.test(e);return c||o.test(e)?u(e.slice(2),c?2:8):n.test(e)?r:+e}e.exports=function(e,t,a){var r,s,n,i,o,u,c=0,l=!1,d=!1,m=!0;if("function"!=typeof e)throw TypeError("Expected a function");function x(t){var a=r,n=s;return r=s=void 0,c=t,i=e.apply(n,a)}function b(e){var a=e-u,r=e-c;return void 0===u||a>=t||a<0||d&&r>=n}function w(){var e,a,r,s=h();if(b(s))return v(s);o=setTimeout(w,(e=s-u,a=s-c,r=t-e,d?p(r,n-a):r))}function v(e){return(o=void 0,m&&r)?x(e):(r=s=void 0,i)}function j(){var e,a=h(),n=b(a);if(r=arguments,s=this,u=a,n){if(void 0===o)return c=e=u,o=setTimeout(w,t),l?x(e):i;if(d)return o=setTimeout(w,t),x(u)}return void 0===o&&(o=setTimeout(w,t)),i}return t=y(t)||0,g(a)&&(l=!!a.leading,n=(d="maxWait"in a)?f(y(a.maxWait)||0,t):n,m="trailing"in a?!!a.trailing:m),j.cancel=function(){void 0!==o&&clearTimeout(o),c=0,r=u=s=o=void 0},j.flush=function(){return void 0===o?i:v(h())},j}},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return s.a}});var r=a(2972),s=a.n(r)},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},714:function(e,t,a){"use strict";a.d(t,{I:function(){return o},default:function(){return c}});var r=a(7437),s=a(2265);let n=(0,a(738).ZF)({apiKey:"AIzaSyAYoc2Ce2GnoImbZCt4yeOEwzE7RJ30BMw",authDomain:"nfc24-e71b4.firebaseapp.com",projectId:"nfc24-e71b4",storageBucket:"nfc24-e71b4.firebasestorage.app",messagingSenderId:"427065559259",appId:"1:427065559259:web:b315185aab57358f52e4fe",measurementId:"G-78TGFCYRSQ"});var i=a(4752);let o=(0,s.createContext)(),u=(0,i.v0)(n);var c=e=>{let{children:t}=e,[a,n]=(0,s.useState)(),[c,l]=(0,s.useState)();return(0,s.useEffect)(()=>{(0,i.Aj)(u,e=>{e?n(e):n(null),l(!1)})},[]),(0,r.jsx)(o.Provider,{value:{handleReg:(e,t)=>(0,i.Xb)(u,e,t),user:a,handleSignOut:()=>(0,i.w7)(u),updateName:e=>{(0,i.ck)(u.currentUser,{displayName:e}).then(()=>{}).catch(e=>{})},handleLogin:(e,t)=>(0,i.e5)(u,e,t)},children:t})}},7525:function(e,t,a){"use strict";a.r(t);var r=a(7437),s=a(2265),n=a(9501),i=a(3464),o=a(9376),u=a(7648),c=a(714),l=a(5607),d=a.n(l);t.default=()=>{let{id:e}=(0,o.useParams)(),[t,a]=(0,s.useState)(!0),{handleReg:l,updateName:m}=(0,s.useContext)(c.I),[f,p]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1),[y,x]=(0,s.useState)(!1),[b,w]=(0,s.useState)(""),v=(0,o.useRouter)(),{register:j,handleSubmit:N,watch:k,formState:{errors:E},setError:I}=(0,n.cI)(),C=k("userName");C=C?C.trim().toLowerCase():"";let P=(0,s.useCallback)(d()(async t=>{try{let t=await i.Z.get("https://nfc-back-2.onrender.com/reginfo?uid=".concat(e));t.data.result&&t.data.result.length>0?(g(!0),p("UID already exists. Try another.")):(g(!1),a(!1),p(""))}catch(e){console.error("Error checking uid:",e),p("Failed to check UID. Please try again.")}},300),[e]);(0,s.useEffect)(()=>{e&&P(e)},[e,P]),(0,s.useEffect)(()=>{h&&v.push("/".concat(e))},[h,e,v]);let S=async t=>{p(""),w(""),x(!0);let a=t.userName.trim().toLowerCase();try{if(h){p("UID already exists. Try another."),x(!1);return}await l(null==t?void 0:t.email,null==t?void 0:t.passwords),await m(a),await i.Z.post("https://nfc-back-2.onrender.com/reginfo",{uid:e,userName:a,emails:null==t?void 0:t.email,passwords:null==t?void 0:t.passwords}),w("Account created successfully! \uD83C\uDF89"),setTimeout(()=>{v.push("/contents/".concat(e))},2e3)}catch(e){switch(console.error("Error:",e),e.code){case"auth/email-already-in-use":I("email",{type:"manual",message:"Email is already in use. Please try another."});break;case"auth/invalid-email":I("email",{type:"manual",message:"Invalid email format. Please check and try again."});break;case"auth/weak-password":I("passwords",{type:"manual",message:"Password is too weak. It should be at least 6 characters."});break;case"auth/network-request-failed":p("Network error. Please check your connection and try again.");break;default:p("An unexpected error occurred. Please try again later.")}}finally{x(!1)}},O=()=>{E.email&&I("email",{type:"manual",message:""}),E.passwords&&I("passwords",{type:"manual",message:""}),E.userName&&I("userName",{type:"manual",message:""}),p("")};return t?(0,r.jsxs)("div",{className:"preloader",children:[(0,r.jsx)("div",{className:"spinner"}),(0,r.jsx)("div",{className:"text-white text-center",children:"Checking UID... Please wait."})]}):(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-900",children:(0,r.jsxs)("div",{className:"bg-gray-800 p-8 rounded-lg shadow-lg w-96",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:"Register"}),b&&(0,r.jsx)("p",{className:"text-green-500 text-sm text-center mb-4",children:b}),(f||h)&&(0,r.jsx)("p",{className:"text-red-500 text-sm text-center mb-4",children:f||"Account is already registered"}),(0,r.jsxs)("form",{onSubmit:N(S),className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-400",children:"Username"}),(0,r.jsx)("input",{type:"text",...j("userName",{required:!0}),className:"w-full p-2 mt-1 bg-gray-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Enter your username",onChange:O}),E.userName&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:E.userName.message||"Username is required"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-400",children:"Email"}),(0,r.jsx)("input",{type:"email",...j("email",{required:!0}),className:"w-full p-2 mt-1 bg-gray-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Enter your email",onChange:O}),E.email&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:E.email.message||"Email is required"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-400",children:"Password"}),(0,r.jsx)("input",{type:"password",...j("passwords",{required:!0}),className:"w-full p-2 mt-1 bg-gray-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Enter your password",onChange:O}),E.passwords&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:E.passwords.message||"Password is required"})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 rounded-md transition-all ".concat(h||f||y?"opacity-50 cursor-not-allowed":""),disabled:h||f||y,children:y?"Registering...":"Register"}),(0,r.jsx)(u.default,{className:"text-blue-600 my-2",href:"/login",children:"Already have an account"})]})]})})}}},function(e){e.O(0,[400,876,694,464,971,117,744],function(){return e(e.s=3004)}),_N_E=e.O()}]);